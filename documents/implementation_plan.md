# 项目实施计划 - AI星盘分析App

## 1. 概述

本文档为 **AI星盘分析App** 的开发实施提供详细的任务分解和执行顺序。开发工作将主要由AI Agent (Claude) 完成，本文档旨在为其提供清晰的指导。

## 2. 项目阶段

整个项目分为三个主要阶段：

1.  **第一阶段: MVP开发 (核心)**
    *   **目标**: 快速构建产品的核心功能并推向市场，验证想法。
    *   **时间**: 预计1-2个开发周期。
2.  **第二阶段: 功能迭代**
    *   **目标**: 根据用户反馈，丰富产品内容和功能。
3.  **第三阶段: 商业化探索**
    *   **目标**: 引入高级功能，探索可持续的商业模式。

## 3. 第一阶段 (MVP) 任务分解

以下是MVP阶段需要完成的任务清单。请Agent严格按照依赖关系顺序执行。

---

### **任务1: 环境搭建 (`tech_setup`)**
*   **目标**: 初始化项目结构和开发环境。
*   **步骤**:
    1.  使用 `npx create-expo-app .` 在当前目录初始化一个Expo (React Native) 项目。
    2.  创建`api`目录，用于存放Vercel Serverless Function。
    3.  初始化Git仓库，并关联到一个新的GitHub/GitLab远程仓库。
    4.  指导用户在Vercel上创建新项目并关联该代码仓库。

---

### **任务2: 后端核心逻辑 (`backend_logic`)**
*   **依赖**: `tech_setup`
*   **目标**: 实现接收用户信息并计算出核心星座的能力。
*   **步骤**:
    1.  在`api/`目录下，创建一个`generate-report.ts`文件。
    2.  在该文件中，配置一个处理`POST`请求的函数。
    3.  安装一个占星计算库 (如 `astrolabe-js`)。
    4.  编写代码逻辑：接收请求体中的`date`, `time`, `location`，并调用库计算出太阳、月亮、上升星座。
    5.  初步返回计算出的星座JSON对象作为响应。

---

### **任务3: AI集成 (`ai_prompt`)**
*   **依赖**: `backend_logic`
*   **目标**: 将星座信息发送给AI，并获取分析报告。
*   **步骤**:
    1.  在`generate-report.ts`中，设计一个高质量的Prompt模板。
    2.  安装用于调用AI服务的依赖（如`openai` SDK或`axios`）。
    3.  指导用户将AI API Key配置到Vercel的环境变量中。
    4.  在获取到星座信息后，填充Prompt模板，并调用AI API。
    5.  将AI返回的文本内容作为最终API响应返回。

---

### **任务4: App UI开发 (`app_ui`)**
*   **依赖**: `tech_setup`
*   **目标**: 构建用户交互的前端界面。
*   **步骤**:
    1.  **输入界面**: 创建一个表单，包含日期选择器、时间选择器和地点输入框。
    2.  **状态管理**: 使用`useState`管理表单数据和加载状态。
    3.  **结果界面**: 创建一个用于展示AI报告的视图。
    4.  **导航**: 使用React Navigation设置两个界面的基本跳转。

---

### **任务5: 前后端集成 (`integration`)**
*   **依赖**: `ai_prompt`, `app_ui`
*   **目标**: 将App与后端服务连接，完成端到端流程。
*   **步骤**:
    1.  在App的输入界面，当用户点击“生成”按钮时，调用后端的`/api/generate-report`接口。
    2.  处理API的加载中、成功、失败状态。
    3.  成功获取数据后，跳转到结果界面并展示报告。
    4.  进行完整的端到端测试，确保流程顺畅。

## 4. 给Claude Agent的开发建议
*   请严格遵循上述任务顺序和依赖。
*   在开始每个任务前，请先向用户确认。
*   每完成一个重要步骤（如后端API可独立工作，前端UI完成），都应进行测试。
*   代码风格力求简洁、清晰，并添加必要的注释。
*   请参考同目录下的`product_requirements.md`和`technical_architecture.md`以获取完整的上下文。 